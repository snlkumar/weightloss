<script>

 $(document).ready(function(){
  

	$("#exercisetips, #mealnotifications").css("display","none");

	$("#notification_notification_type").change(function(){ 

	type=$("#notification_notification_type").find("option:selected").text();

	if (type=="Food")
	{
	$("#exercisetips").css("display","none");
	$("#mealnotifications").css("display","block");

	}
	else if (type=="Activity")
	{
	$("#mealnotifications").css("display","none");
	$("#exercisetips").css("display","block");

	}
	else
	{
	$("#exercisetips, #mealnotifications").css("display","none");
	}


	});

});


function submitform()
{
	if ($("#noticefor").find("option:selected").text()=='')
	{
	alert("Please select recepients.");
	return false;		
	}
	else if ($("#notificationFrequency_").find("option:selected").text()=='')	
	{
	alert("Notification frequency field cannot be empty.");
	return false;		
	}
	else if ( $("#message").val()=='')	
	{
	alert("Message frequency field cannot be empty.");
	return false;		
	}
   else
   {
   
	type=$("#notification_notification_type").find("option:selected").text();

	if (type=="Activity")
	{
		 if ($("#excercises").find("option:selected").text()=='')	
	{
	alert("Excercises field cannot be empty.");
	return false;		
	}
	else
	{
     notification_new.submit();
	}

	}
	else if (type=="Food")
	{
		 if ($("#meals").find("option:selected").text()=='')	
	{
	alert("Meals field cannot be empty.");
	return false;		
	}
	else
	{
     notification_new.submit();
	}
	}
	else
	{
     $("#notification_new").submit();
	}
   
  }
 
}
</script>
		<div class="grid_5 ">
			<p id="user-name" class="grid_5" style="font-size:1.5em;"><%= current_vendor.business_name %></p>
			<div class="profile-avatar avatar"><%= image_tag(current_vendor.photo.url(:profile)) %></div>
			<div class="sidebar-container" style="">



			<div class="clear">&nbsp;</div>
			<ul id="user-settings-tabs">
			<li class="vendor-class">
			<%if current_vendor%>
			<%= link_to 'Add MyWeightWorld Users', usersearch_vendors_path%>                
			</li>
			<li class="vendor-class">
			<%= link_to 'Add a Member', addmember_vendors_path%>
			</li>                
			<li class="vendor-class">
			<%= link_to 'Members List', memberlist_vendors_path%>
			</li> 
			<li class="vendor-class">
			<%= link_to 'Notification Settings', vendorNotificationsNew_vendors_path%>
			</li> 

			</ul>
			<%end%>
			</div>
		</div>


<br><br><%#= link_to 'Back', :back, :style=>"margin-left:5%;" %><br><br>




<div style="margin-left:26em;">



 <h1>New Notification</h1>
  <hr><br />
<%= form_for(@notification, :as => :notification, :url => admin_notifications_path, :html => {:multipart => true} ) do |f| %>

	<%=f.hidden_field :notificationTo, :value=>"User"%>
	<%=f.hidden_field :notificationable_type, :value=>"Admin"%>
	<%=f.hidden_field :notificationable_id, :value=>"#{current_vendor.id}"%>  
 

<p>

	<%= f.label :notificationToId,  %Q{Notification To: <span class="help-text">(Multiple select holding CTRL key)</span> }.html_safe %> <br/> 
	<%=select_tag 'notificationToId[]', options_for_select(@members.map {|s| ["#{s.first_name} "+ "#{s.last_name}", s.email]}), :multiple => true, :size => 7, :id=>"noticefor",:style=>"width:10em;"%>

</p>



<p>
	<%= f.label :notification_type, "Notification type:" %>
	<%=f.select   :notification_type, options_for_select([ ['Weight loss','weight' ],['Activity','activity' ] , ['Food','food' ],['Supplements','supplements' ] ,['Body fat','bodyfat' ], ['Calories','calories' ], ['Other','other']   ]) %> 


</p> <br/>  
   

<div id= "mealnotifications" style="display:none;">

<p>
		<label>Choose Food: <span class="help-text">(Multiple select holding CTRL key)</span></label><br/>
		<%=select_tag 'mealslist[]', options_for_select(allfoods.map {|s| ["#{s.name} ", s.id]}), :multiple => true, :size => 7, :id=>"meals",:style=>"width:20em;"%><br/><br/>
</p>

</div>



<div id="exercisetips">

<p>		
		<label>Recommend Exercise :<span class="help-text">(Multiple select holding CTRL key)</span> </label><br/><br/>
			<%=select_tag 'exerciseslist[]', options_for_select(Exercise.all.map {|s| ["#{s.description} ", s.id]}), :multiple => true, :size => 7, :id=>"excercises",:style=>"width:20em;"%><br/><br/>

</p>	

</div>



<p>
	<label>Amount :</label>
	<%=f.text_field :amount, :style=>"width:4em;height:1.3em;"%>

</p>

   
<p>
	<%=f.label  :notificationFrequency, %Q{ Send Nofication every: <span class="help-text">(Frequency: Multiple select holding CTRL key)</span> }.html_safe %><br/>
	<%=select_tag  'notificationFrequency[]', options_for_select([ ['day','1.day' ],['2 day','2.days' ] ,['3 day','3.days' ], ['weekely','7.days' ] ,['Bi weekely','14.days' ] ,['monthly','30.days' ] ]),:multiple => true, :size => 5 %> 

</p> <br/>  



<p>
 <%=f.label  "Send notification at:"%>
  <%= f.select "time", options_for_select([["6am", "6:00 am"], ["7am", "7:00 am"], ["8am", "8:00 am"], ["9am", "9:00 am"], ["10am", "10:00 am"], ["11am","11:00 am"], ["12pm","12:00 pm"], ["1pm", "1:00 pm"], ["2pm", "2:00 pm"], ["3pm", "3:00 pm"], ["4pm", "4:00 pm"], ["5pm", "5:00 pm"], ["6pm", "6:00 pm"], ["7pm", "7:00 pm"], ["8pm", "8:00 pm"], ["9pm", "9:00 pm"], ["10pm", "10:00 pm"], ["11pm", "11:00 pm"], ["12am", "12:00 am"], ["1am", "1:00 am"], ["2am", "2:00 am"], ["3am", "3:00 am"], ["4am","4:00 am" ], ["5am", "5:00 am"]])%>

<p></br>



<p>
	<%= f.label :do_dont, "Do/Don't" %>
	<%=f.select   :do_dont, options_for_select([ ['Do','1' ],['Dont','0' ] ]) %> 

</p> <br/>  
   
<p>
	<%= f.label :message, "Message:" %><br/><br/>
	<%= f.text_area :message , :id=>"message",:style=>"width:25em;height:10em;"%>

</p><br/><br/>

 
      
<p>
<!--	<%#= f.submit 'Create Notification' %> | <%#= link_to 'Cancel', admin_notifications_path %>-->
<input type="button" value="Save" onclick="submitform();"/>
</p>

<% end %>

  
</div>

