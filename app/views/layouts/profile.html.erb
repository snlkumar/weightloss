<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> 
<html class="no-js" lang="en"> <!--<![endif]-->
  <head>
    <%= render :partial => '/layouts/head' %>
  </head>
  <body>
    <%= render :partial => '/layouts/header' %>
    
    <div class="container_16">
      <div class="grid_5 ">
        <div class="sidebar-container" style="">
          <p id="user-name" class="grid_5"><%= @user.full_name %></p>
          
          <div class="clear">&nbsp;</div>
          
          <% if @user.avatar.file? %>
            <div class="profile-avatar avatar"><%= image_tag(@user.avatar.url(:profile)) %></div>
          <% else %>
            <div class="profile-avatar avatar"></div>
          <% end %>
          
          <%= link_to 'Edit', user_edit_personal_info_path(current_user), :id => 'edit-profile', :class => 'outlined-fade', :title => 'Edit your profile' %>
          
          <div class="clear">&nbsp;</div>
          
          <%= render :partial => 'details', :locals => {:user => @user} %>
          <br/>
        </div>
        
        <div class="clear">&nbsp;</div>
        <br/>
        
        <% if @user && @user.has_goal? %>
          <%= render :partial => 'shared/achievement_sidebar_section' %>
        <% end %>
        
      </div>
      
      <%= yield :sidebar %>
      
      <div id="content" class="grid_11 profile">
        <%= yield %>
      </div>
      
      <br/>
    </div>
    
    <div class="full">
      <div id="footer" class="container_16">
        
        <div style="clear:both">&nbsp;</div>
      </div>
    </div>
    
    <!-- JavaScript at the bottom for fast page loading -->
    <%= javascript_include_tag "modernizr-1.7.min.js", "respond.min.js" %>
    
    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
    <!-- // <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.js"></script>
        //     <script>window.jQuery || document.write("<script src='/javascripts/jquery-1.6.min.js'>\x3C/script>")</script> -->
    
    <%= javascript_include_tag "jquery-1.4.4.dev.js", "jquery-ui-1.8.9.min.js", "underscore", "jquery.labelify.js", "jquery.jeditable", "application" %>
    <%= init_tinymce_hammer_if_required %>
    
    <%= render :partial => "shared/gridder" %>
    
    <script type="text/javascript" charset="utf-8">
      $(document).ready(function() {
        <%= yield :js %>
        
        <%= render :partial => 'shared/weight_update_js' %>
      });
    </script>
  </body>
</html>