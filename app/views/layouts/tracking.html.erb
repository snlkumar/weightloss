<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> 
<html class="no-js" lang="en"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
         Remove this if you use the .htaccess -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <!-- Mobile viewport optimized: j.mp/bplateviewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title><%= yield(:title) || "MyWeightWorld" %></title> 
    <!-- <link rel="shortcut icon" href="/favicon.ico" /> -->
    
    <%= stylesheet_link_tag '960', "ui-lightness/jquery-ui-1.8.9.custom.css", 'application', :media => "screen, projection" %>
    
  </head>
  <body>
    <div id="header" class="full">
      <div class="small-nav container_16">
        <div class="grid_5 sidebar-container" style="height: 26px;">
          &nbsp;
        </div>
        <div class="grid_11">
          <%= render :partial => 'shared/session_menu_bar' %>
        </div>
        <div class="clear">&nbsp;</div>
      </div>
      
      <div id="main-nav" class="full">
        <div class="main-nav container_16" style="position:relative;">
          
          <div class="button" style="padding: 2px 5px; width: 130px; height: 31px; float:right; line-height: 29px; margin-top: 12px;">
            <%= link_to "+ Add Meal", new_meal_path, :style => "font-size: 12pt;" %>
          </div>
          
          <div class="button" style="padding: 2px 5px;  width: 130px;  height: 31px; float:right; line-height: 29px; margin-top: 12px;">
            <%= link_to "+ Add Workout", new_workout_path, :style => "font-size: 12pt;" %>
          </div>
          
          <h2 id="logo" class="grid_5 sidebar-container"><%= link_to 'myweightworld', tracking_path %></h2>
          
          <div class="clear">&nbsp;</div>
          
          <div class="grid_5 sidebar-container" style="height:25px;">&nbsp;</div>
          <div class="grid_11" style="height:25px;">&nbsp;</div>
          
          <div class="clear">&nbsp;</div>
          
          <div id="back-bar" class="grid_5 sidebar-container light-blue">
            <%= link_to "Back to Overview", {} %>
          </div>
          
          <div id="nav-bar" class="grid_11">
            <%= render :partial => 'shared/nav_bar' %>
          </div>
          
          <div class="clear">&nbsp;</div>
        </div>
      </div>
    </div>
    <!-- DONE HEADER -->
    
    <div class="clear">&nbsp;</div>
    
    <div class="container_16">
      <div class="grid_5 ">
        <div class="sidebar-container">
          <p id="user-name" class="grid_5"><%= current_user.full_name %></p>
          
          <div class="clear">&nbsp;</div>
          
          <% if current_user.avatar.file? %>
            <div class="small-avatar avatar"><%= image_tag(current_user.avatar.url(:tracking)) %></div>
          <% else %>
            <div class="small-avatar"></div>
          <% end %>
          
          <%= link_to 'Edit Profile', user_edit_personal_info_path(current_user), :id => 'edit-profile', :class => 'light-blue wide' %>
          
          <% if current_user.city.present? || current_user.state.present? %>
            <p id="location" class="right-side"><%= [current_user.city, current_user.state].compact.join(', ') %></p>
          <% end %>
          <div class="clear">&nbsp;</div>

          <br/>
        </div>
        
        <div class="clear">&nbsp;</div>
        <br/>
        
        <%= render :partial => 'shared/achievement_sidebar_section' %>
        
        <div class="clear">&nbsp;</div>
        
        <div class="sidebar-container achievement-calendar subsection" >
          <h4 class="sidebar-subheader">Burned Calories</h4>
          
          <div class="large-calories">
            <span><%= current_user.calories_burned_today %></span>
          </div>
          <div class="small-text">burned today</div>
          <div class="calories-this-week">
            <span><%= current_user.calories_burned_this_week %></span> this week
          </div>
          <div class="clear">&nbsp;</div>
        </div>
        
        <div class="sidebar-container achievement-calendar subsection" >
          <h4 class="sidebar-subheader">Consumed Calories</h4>
          
          <div class="large-calories">
            <span style="color: #7cc576"><%= current_user.calories_consumed_today %></span>
          </div>
          <div class="small-text">consumed today</div>
          <div class="calories-this-week">
            <span style="color: #7cc576"><%= current_user.calories_consumed_this_week %></span>/<%= five_hundred_calorie_deficit(current_user) * 7 %> this week
          </div>
          
          <div class="clear">&nbsp;</div>
        </div>
        
      </div>
      
      <%= yield :sidebar %>
      
      <div id="content" class="grid_11 profile">
        <%= yield %>
      </div>
      
      <br/>
      
    </div>
    
    <div class="full">
      <div id="footer" class="container_16">
        
        <div style="clear:both">&nbsp;</div>
      </div>
    </div>
    
    <!-- JavaScript at the bottom for fast page loading -->
    <%= javascript_include_tag "modernizr-1.7.min.js", "respond.min.js" %>
    
    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
    <!-- // <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.js"></script>
        //     <script>window.jQuery || document.write("<script src='/javascripts/jquery-1.6.min.js'>\x3C/script>")</script> -->
    
    <%= javascript_include_tag "jquery-1.4.4.dev.js", "jquery-ui-1.8.9.min.js", "underscore", "jquery.labelify.js", "jquery.jeditable", "highcharts", "application" %>
    <%= init_tinymce_hammer_if_required %>
    
    <%= render :partial => "shared/gridder" %>
    
    <script type="text/javascript" charset="utf-8">
      $(document).ready(function() {
        <%= yield :js %>
        
        <%= render :partial => 'shared/weight_update_js' %>
      });
    </script>
  </body>
</html>